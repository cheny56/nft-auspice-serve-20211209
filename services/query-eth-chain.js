
const {web3}=require('../configs/configweb3')
const {validate_txhash}=require('../utils/validates')
const {createifnoneexistent }=require('../utils/db')
const LOGGER=console.log
const gettxfromtxhash=txhash=>{
	return new Promise ((resolve,reject)=>{
		if(validate_txhash(txhash)){} else {LOGGER('trRYDjzKrA@hash-invalid'); resolve(null);return}
		web3.eth.getTransaction(txhash).then(resp=>{
			resolve(resp)
		}).catch(err=>{LOGGER('OBaC0FsnwO' , err)
			resolve(null)
		})
	})
}
const gettxandwritetodb=async txhash=>{
	gettxfromtxhash(txhash).then(async resp=>{
		return await createifnoneexistent('chaintransactions' , {hash:txhash}, {			... resp
		})
	})
}
/**
{	from: '0xE1165CEF25BFBeBE98B534eF6224223CF4580570',
	to: '0xcF3a6246879aab9eb7beC0d936743208EA51d0Ed',
	value: '0',
  gas: 500000,
  gasPrice: '3000000000',

  input: '0x65da41b9000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000005004000020e08a9473382dbe4e927511962
054e6cc857cc1a4850e72d05c61480000000000be0592bbe5f7d0b92689e3feb8de6e363f4fc5d3aaee2b137981e482a5ec0d2be88eb760ffff001ccee1571a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000019000000020e5576fbfd8b11e
f7593d6e18eb31229172a26fa5e2a2ce2634a9000000000000a1a9967e550207a6794e857a13d7e72c10a10e9bf80f2003ae593ac44bba1e23eb8eb760ffff001cb9cc2e2904e0ff2f7c774fb1eb99936b5fbd9fe1888a95367ce926d1d5bbea9249bba200000000001507e9ec586f7a8d8147337cc9f3beac897
ee9586ad7188d4474cdc1a255caa4ec8eb760ffff001c4274d16c04000020dfcbe827ddd32edc2379268e2ead575bccef5822eb4c7ef05922070000000000519335f6dcfa47f07248eb9409b2accb92cad6716a5a140e7684d91638d79d69ec8eb760ffff001c3f24b2270000c020613eefda415a3f8ef36f53d3
eda989fe4ef5d81ed4953d79a5a0090000000000d5af3ba4f4710f43ddb406b44336835b9262d5a5499ca9bfcc64ff73877ccb73ec8eb760ffff001c45190e350000c0206c0b0e12e23e6b37384af0af55069659fc7b8e90194ce49a491e0100000000009dce7acc1361a83fe34da366a18c2ea7519e75f191a1c
f66ab31b2cec2709ca5ee8eb760ffff001ccc7a161500000000000000000000000000000000',
  nonce: 147326,
  r: '0xf44e10158e120f1296aac19addd2351a8558a3eba603b55f66b1311cc24d607b',
  s: '0x118a10cc5254308334ac167fa02bad67911424f41c957cad54d155138b032c56',
  transactionIndex: 6,
  type: '0x0',
  v: '0x29',
  hash: '0xa08499eb210370138ad079dde9141a6fc7434318188a2f4774e2383c343c17bc',
}
 */
module.exports={gettxfromtxhash
	, gettxandwritetodb
}
